(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{16:function(e,t,a){e.exports=a(40)},21:function(e,t,a){},25:function(e,t,a){},32:function(e,t,a){},34:function(e,t,a){},36:function(e,t,a){},38:function(e,t,a){},40:function(e,t,a){"use strict";a.r(t);var n=a(0),s=a.n(n),r=a(8),c=a.n(r),l=(a(21),a(3)),i=a.n(l),o=a(4),u=a(9),k=a(10),d=a(14),p=a(11),h=a(15),T=a(2),m=(a(25),a(12)),f=a(13),w=function(e){return s.a.createElement("button",{className:"deleteTaskButton",type:"button",onClick:function(){return e.deleteTask(e.taskID)}},s.a.createElement(m.a,{icon:f.a}))},g=(a(32),function(e){var t=e.task,a=t.task_id,n=t.task_title,r=t.task_desc,c=t.task_completed,l=t.task_scheduled_dt,i=t.priority_desc,o=l?l.substring(0,10):"",u="High"===i?"task__priority--high":"task__priority";return s.a.createElement("div",{className:"task"},s.a.createElement("form",{id:a,autoComplete:"off"},s.a.createElement("input",{className:"task__title",type:"text",name:"task_title",value:n,onChange:e.handleTaskUpdate,onBlur:e.putTaskUpdate}),s.a.createElement("input",{className:"task__completed",type:"checkbox",name:"task_completed",checked:c,onChange:e.handleTaskUpdate,onBlur:e.putTaskUpdate}),s.a.createElement("textarea",{className:"task__desc",type:"text",name:"task_desc",rows:"3",cols:"20",placeholder:"...",value:r,onChange:e.handleTaskUpdate,onBlur:e.putTaskUpdate}),s.a.createElement("input",{className:"task__scheduledDt",type:"date",name:"task_scheduled_dt",value:o,onChange:e.handleTaskUpdate,onBlur:e.putTaskUpdate}),s.a.createElement("select",{className:u,name:"priority_desc",value:i,onChange:e.handleTaskUpdate,onBlur:e.putTaskUpdate},s.a.createElement("option",null,"High"),s.a.createElement("option",null,"Medium"),s.a.createElement("option",null,"Low")),s.a.createElement(w,{deleteTask:e.deleteTask,taskID:a})))}),b=(a(34),function(e){return s.a.createElement("button",{className:"newTaskButton",type:"button",onClick:e.postNewTask},"Add Task")}),v=(a(36),function(e){return s.a.createElement("div",{className:"newTaskForm"},s.a.createElement("form",null,s.a.createElement("input",{className:"newTaskForm__titleInput",type:"text",placeholder:"Task Title",value:e.newTaskTitle,onChange:e.handleNewTaskChange}),s.a.createElement(b,{postNewTask:e.postNewTask})))}),_=(a(38),function(e){return e.replace(/%/g,"%25").replace(/[\n]/g,"%0A").replace(/\//g,"%2f").replace(/\\/g,"%5C").replace(/\?/g,"%3f").replace(/'/g,"''").replace(/#/g,"%23")}),N=function(e){function t(e){var a;return Object(u.a)(this,t),(a=Object(d.a)(this,Object(p.a)(t).call(this))).state={error:null,isFetched:!1,tasks:[],newTaskTitle:""},a.getAllTasks=a.getAllTasks.bind(Object(T.a)(Object(T.a)(a))),a.putTaskUpdate=a.putTaskUpdate.bind(Object(T.a)(Object(T.a)(a))),a.handleTaskUpdate=a.handleTaskUpdate.bind(Object(T.a)(Object(T.a)(a))),a.handleNewTaskChange=a.handleNewTaskChange.bind(Object(T.a)(Object(T.a)(a))),a.postNewTask=a.postNewTask.bind(Object(T.a)(Object(T.a)(a))),a.deleteTask=a.deleteTask.bind(Object(T.a)(Object(T.a)(a))),a}return Object(h.a)(t,e),Object(k.a)(t,[{key:"getAllTasks",value:function(){var e=Object(o.a)(i.a.mark(function e(){var t,a;return i.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("/allTasks");case 2:return t=e.sent,e.prev=3,e.next=6,t.json();case 6:a=e.sent,this.setState({isFetched:!0,tasks:a}),e.next=13;break;case 10:e.prev=10,e.t0=e.catch(3),this.setState({error:e.t0,isFetched:!0});case 13:case"end":return e.stop()}},e,this,[[3,10]])}));return function(){return e.apply(this,arguments)}}()},{key:"handleTaskUpdate",value:function(e){var t,a=Number(e.target.parentNode.id),n=e.target.name;t="task_completed"===n?e.target.checked:e.target.value;var s=this.state.tasks.map(function(e){return e.task_id===a?function(e){var a=JSON.parse(JSON.stringify(e));return a[n]=t,a}(e):e});this.setState({tasks:s})}},{key:"putTaskUpdate",value:function(e){var t,a=Number(e.target.parentNode.id),n=e.target.name;this.state.tasks.forEach(function(e){e.task_id===a&&(t=e[n])}),"task_title"===n&&""===t||("task_title"!==n&&"task_desc"!==n||""===(t=_(t))&&(t="NULL"),fetch("/amendTask/".concat(a,"/field/").concat(n,"/value/").concat(t),{method:"PUT"}))}},{key:"deleteTask",value:function(){var e=Object(o.a)(i.a.mark(function e(t){return i.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!window.confirm("Are you sure that you want to delete this task?")){e.next=5;break}return e.next=4,fetch("/deleteTask/".concat(t),{method:"DELETE"});case 4:this.getAllTasks();case 5:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}()},{key:"handleNewTaskChange",value:function(e){var t=e.target.value;this.setState({newTaskTitle:t})}},{key:"postNewTask",value:function(){var e=Object(o.a)(i.a.mark(function e(){var t;return i.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(""!==(t=_(this.state.newTaskTitle))){e.next=3;break}return e.abrupt("return");case 3:return e.next=5,fetch("/addTask/".concat(t),{method:"POST"});case 5:this.setState({newTaskTitle:""}),this.getAllTasks();case 7:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"componentDidMount",value:function(){this.getAllTasks()}},{key:"render",value:function(){var e=this,t=this.state,a=t.error,n=t.isFetched;if(a)return s.a.createElement("section",null,s.a.createElement("p",null,"Sorry, something went wrong. Please try again."));if(n){var r=this.state.tasks.map(function(t){return s.a.createElement(g,{key:t.task_id,task:t,handleTaskUpdate:e.handleTaskUpdate,putTaskUpdate:e.putTaskUpdate,deleteTask:e.deleteTask})});return s.a.createElement("section",{className:"tasksContainer"},s.a.createElement(v,{newTaskTitle:this.state.newTaskTitle,handleNewTaskChange:this.handleNewTaskChange,postNewTask:this.postNewTask}),r)}return s.a.createElement("section",null,s.a.createElement("p",null,"Your tasks are loading..."))}}]),t}(n.Component);c.a.render(s.a.createElement(N,null),document.getElementById("root"))}},[[16,2,1]]]);
//# sourceMappingURL=main.62a29660.chunk.js.map