(this.webpackJsonpclient=this.webpackJsonpclient||[]).push([[0],[,,,,,,,,,,function(e,t,a){e.exports=a(28)},,,,,function(e,t,a){},,function(e,t,a){},,,,,,function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){"use strict";a.r(t);var s=a(0),n=a.n(s),r=a(7),l=a.n(r),c=(a(15),a(2)),i=a.n(c),o=a(3),d=(a(17),a(8)),u=a(9),k=e=>n.a.createElement("button",{className:"deleteTaskButton",type:"button",onClick:()=>e.deleteTask(e.taskID)},n.a.createElement(d.a,{icon:u.a})),h=(a(23),e=>{var t=e.task,a=t.task_id,s=t.task_title,r=t.task_desc,l=t.task_completed,c=t.task_scheduled_dt,i=t.priority_desc,o=c?c.substring(0,10):"",d="High"===i?"task__priority--high":"task__priority";return n.a.createElement("div",{className:"task"},n.a.createElement("form",{id:a,autoComplete:"off"},n.a.createElement("input",{className:"task__title",type:"text",name:"task_title",value:s,onChange:e.handleTaskUpdate,onBlur:e.putTaskUpdate}),n.a.createElement("input",{className:"task__completed",type:"checkbox",name:"task_completed",checked:l,onChange:e.handleTaskUpdate,onBlur:e.putTaskUpdate}),n.a.createElement("textarea",{className:"task__desc",type:"text",name:"task_desc",rows:"3",cols:"20",placeholder:"...",value:r,onChange:e.handleTaskUpdate,onBlur:e.putTaskUpdate}),n.a.createElement("input",{className:"task__scheduledDt",type:"date",name:"task_scheduled_dt",value:o,onChange:e.handleTaskUpdate,onBlur:e.putTaskUpdate}),n.a.createElement("select",{className:d,name:"priority_desc",value:i,onChange:e.handleTaskUpdate,onBlur:e.putTaskUpdate},n.a.createElement("option",null,"High"),n.a.createElement("option",null,"Medium"),n.a.createElement("option",null,"Low")),n.a.createElement(k,{deleteTask:e.deleteTask,taskID:a})))}),p=(a(24),e=>n.a.createElement("button",{className:"newTaskButton",type:"button",onClick:e.postNewTask},"Add Task")),m=(a(25),e=>n.a.createElement("div",{className:"newTaskForm"},n.a.createElement("form",null,n.a.createElement("input",{className:"newTaskForm__titleInput",type:"text",placeholder:"Task Title",value:e.newTaskTitle,onChange:e.handleNewTaskChange}),n.a.createElement(p,{postNewTask:e.postNewTask}))));a(26);class T extends s.Component{constructor(e){super(),this.state={selected:"Created Date (Descending)"},this.onButtonClick=this.onButtonClick.bind(this),this.onSelectChange=this.onSelectChange.bind(this),this.refactorSelectValue=this.refactorSelectValue.bind(this)}refactorSelectValue(e){var t=e.substring(0,e.indexOf("(")).trim(),a=e.substring(e.indexOf("(")+1,e.indexOf(")"));return{orderByField:{"Created Date":"task_creation_dt","Scheduled Date":"task_scheduled_dt"}[t],direction:a}}onSelectChange(e){var t=e.target.value;this.setState({selected:t})}onButtonClick(){var e=this.state.selected;this.props.sortTasks(this.refactorSelectValue(e))}render(){return n.a.createElement("div",{className:"sortBy"},n.a.createElement("label",{className:"sortBy__label"},"Sort By:",n.a.createElement("select",{className:"sortBy__dropdown",value:this.state.selected,onChange:this.onSelectChange},n.a.createElement("option",null,"Created Date (Descending)"),n.a.createElement("option",null,"Created Date (Ascending)"),n.a.createElement("option",null,"Scheduled Date (Descending)"),n.a.createElement("option",null,"Scheduled Date (Ascending)"))),n.a.createElement("button",{className:"sortBy__button",onClick:this.onButtonClick},"Sort"))}}var g=T,_=(a(27),e=>e.replace(/%/g,"%25").replace(/[\n]/g,"%0A").replace(/\//g,"%2f").replace(/\\/g,"%5C").replace(/\?/g,"%3f").replace(/'/g,"''").replace(/#/g,"%23")),f=e=>null===e?null:Number(e.replace(/[^0-9]/g,""));class v extends s.Component{constructor(e){super(),this.state={error:null,isFetched:!1,tasks:[],taskOrder:{orderByField:"task_creation_dt",direction:"Descending"},newTaskTitle:""},this.getAllTasks=this.getAllTasks.bind(this),this.putTaskUpdate=this.putTaskUpdate.bind(this),this.handleTaskUpdate=this.handleTaskUpdate.bind(this),this.handleNewTaskChange=this.handleNewTaskChange.bind(this),this.postNewTask=this.postNewTask.bind(this),this.deleteTask=this.deleteTask.bind(this),this.sortTasks=this.sortTasks.bind(this)}getAllTasks(e){var t=this;return Object(o.a)(i.a.mark((function a(){var s,n,r,l,c;return i.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return s=t.state.taskOrder,n=s.orderByField,r=s.direction,a.next=3,fetch("/allTasks/".concat(n,"/").concat(r,"/").concat(e));case 3:return l=a.sent,a.prev=4,a.next=7,l.json();case 7:c=a.sent,t.setState({isFetched:!0,tasks:c}),a.next=14;break;case 11:a.prev=11,a.t0=a.catch(4),t.setState({error:a.t0,isFetched:!0});case 14:case"end":return a.stop()}}),a,null,[[4,11]])})))()}handleTaskUpdate(e){var t,a=Number(e.target.parentNode.id),s=e.target.name;t="task_completed"===s?e.target.checked:"task_scheduled_dt"===s?""!==e.target.value?e.target.value+"T00:00:00.000Z":null:e.target.value;var n=this.state.tasks.map(e=>e.task_id===a?(e=>{var a=JSON.parse(JSON.stringify(e));return a[s]=t,a})(e):e);this.setState({tasks:n})}putTaskUpdate(e){var t,a=Number(e.target.parentNode.id),s=e.target.name;this.state.tasks.forEach(e=>{e.task_id===a&&(t=e[s])}),"task_title"===s&&""===t||("task_title"!==s&&"task_desc"!==s||(t=_(t)),""===t&&(t="null"),fetch("/amendTask/".concat(a,"/").concat(s,"/").concat(t),{method:"PUT"}))}deleteTask(e){var t=this;return Object(o.a)(i.a.mark((function a(){return i.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:if(!window.confirm("Are you sure that you want to delete this task?")){a.next=6;break}return a.next=4,fetch("/deleteTask/".concat(e),{method:"DELETE"});case 4:200===a.sent.status&&t.getAllTasks(!1);case 6:case"end":return a.stop()}}),a)})))()}handleNewTaskChange(e){var t=e.target.value;this.setState({newTaskTitle:t})}postNewTask(){var e=this;return Object(o.a)(i.a.mark((function t(){var a;return i.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(""!==(a=_(e.state.newTaskTitle))){t.next=3;break}return t.abrupt("return");case 3:return t.next=5,fetch("/addTask/".concat(a),{method:"POST"});case 5:200===t.sent.status&&(e.setState({newTaskTitle:""}),e.getAllTasks(!0));case 7:case"end":return t.stop()}}),t)})))()}sortTasks(e){var t=e.orderByField,a=e.direction;if(!this.state.tasks.every(e=>null===e[t])){var s=this.state.tasks.map(e=>e).sort((e,s)=>{var n=f(e[t]),r=f(s[t]);return null===n&&null===r?f(s.task_creation_dt)-f(e.task_creation_dt):null===n?1:null===r?-1:"Ascending"===a?n-r:"Descending"===a?r-n:0});this.setState({tasks:s,taskOrder:{orderByField:t,direction:a}})}}componentDidMount(){this.getAllTasks(!1)}render(){var e=this.state,t=e.error,a=e.isFetched;if(t)return n.a.createElement("section",null,n.a.createElement("p",null,"Sorry, something went wrong. Please try again."));if(a){var s=this.state.tasks.map(e=>n.a.createElement(h,{key:e.task_id,task:e,handleTaskUpdate:this.handleTaskUpdate,putTaskUpdate:this.putTaskUpdate,deleteTask:this.deleteTask}));return n.a.createElement("section",{className:"tasksContainer"},n.a.createElement(m,{newTaskTitle:this.state.newTaskTitle,handleNewTaskChange:this.handleNewTaskChange,postNewTask:this.postNewTask}),s.length>0?n.a.createElement(g,{sortTasks:this.sortTasks}):null,s)}return n.a.createElement("section",null,n.a.createElement("p",null,"Your tasks are loading..."))}}var w=v;l.a.render(n.a.createElement(w,null),document.getElementById("root"))}],[[10,1,2]]]);
//# sourceMappingURL=main.484c7039.chunk.js.map